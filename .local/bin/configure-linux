#!/bin/sh

# Begin
sudo dnf upgrade --refresh -y

# Install tlp
sudo dnf install -y tlp tlp-rdw
sudo dnf remove -y tuned tuned-ppd
sudo systemctl enable tlp.service
sudo systemctl mask systemd-rfkill.service systemd-rfkill.socket

# Install powertop
sudo dnf install -y powertop
# TODO Ver maneira de ja esta calibrado ou nao, ou se isso e' sequer preciso
# sudo powertop -c # calibrate

# Install gnome tools + pipx
sudo dnf install -y gnome-tweaks gnome-extensions-app pipx

# Install gnome extensions - marcs14 is the power manager
pipx install gnome-extensions-cli
gext install accent-directories@taiwbi.com appindicatorsupport@rgcjonas.gmail.com auto-accent-colour@Wartybix drive-menu@gnome-shell-extensions.gcampax.github.com marcs14@gmail.com

# Configure gnome settings

# Move window buttons to the left, like MacOS
dconf write /org/gnome/desktop/wm/preferences/button-layout "'close:appmenu'"

# Swap esc and tab - this resets all other keyboard settings, careful!
dconf write /org/gnome/desktop/input-sources/xkb-options "['caps:swapescape']"
